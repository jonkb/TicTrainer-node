<!DOCTYPE html>
<html lang="en-us">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>TicTrainer registration for trainers</title>
    <link rel="stylesheet" type="text/css" href="/stylesheets/bgStyle.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/normalize.css">
  </head>
  <body>
  
    <section class="page-header">
			<div class="header-navbar">
				<a href="/" class="logo"></a>
				<h1>Trainer Account Registration</h1>
				<div style="clear: both;"></div>
			</div>
    </section>
	
    <section class="main-content">
      <!--FORM-->
      <form method="POST" name="addTrainer" onsubmit="return checkForm();">
        <fieldset>
          <legend>New Account</legend>
          Birth Year:<br>
          <input type="text" name="birth" placeholder="yyyy" required> <br>
          Password:<br>
          <input type="password" name="pWord" required> <br>
          Confirm Password:<br>
          <input type="password" name="pWordConf" required> <br>
          <input type="submit" value="Create Account" class="btn">
        </fieldset>
      </form>
    </section>
		<script>
			function checkForm() {
				var y = document.forms["addTrainer"]["birth"].value;
				var pw = document.forms["addTrainer"]["pWord"].value;
				var pwC = document.forms["addTrainer"]["pWordConf"].value;
				if(pw != pwC){
					alert("Passwords do not match");
					return false;
				}
				if(!y || !pw || !pwC){
					alert("Please finish the form");
					return false;
				}
				if(pw.indexOf(";") != -1 || pw.indexOf("<") != -1 || pw.indexOf(">") != -1){
					alert("Please do not include \";\", \"<\", or \">\" in your password");
					return false;
				}
				if(isNaN(y)){
					alert("Invalid year");
					return false;
				}
				
				var now = new Date();
				if(y.length == 2){//Really, they shouldn't use this
					if(parseInt(y)+2000 < now.getFullYear())//y is between 00 and 15(in 2016)
						y = "20"+y;
					else
						y = "19"+y;
						
						document.forms["addTrainer"]["birth"].value = y;
				}
				else if(y.length == 4){
					if(parseInt(y) > now.getFullYear()){
						alert("Invalid year");
						return false;
					}
				}
				else{
					alert("Invalid year");
					return false;
				}
				if(now.getFullYear() - parseInt(y) > 89){
					document.forms["addTrainer"]["birth"].value = now.getFullYear() - 90;
				}
				return true;
			}
		</script>
  </body>
</html>
